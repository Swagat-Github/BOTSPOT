function trim(e){return e.replace(/^[\t ]+/g,"").replace(/[\t ]+$/g,"")}Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,a=function(){},r=function(){return n.apply(this instanceof a&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return a.prototype=this.prototype,r.prototype=new a,r}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,a;if(null==this)throw new TypeError(" this is null or not defined");var r,i=Object(this),o=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(n=t),a=0;a<o;)a in i&&(r=i[a],e.call(n,r,a,i)),a++}),Array.prototype.map||(Array.prototype.map=function(e,t){var n,a,r;if(null==this)throw new TypeError(" this is null or not defined");var i,o=Object(this),l=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(n=t),a=new Array(l),r=0;r<l;)r in o&&(i=o[r],i=e.call(n,i,r,o),a[r]=i),r++;return a}),Array.prototype.some||(Array.prototype.some=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError;for(var t=Object(this),n=t.length>>>0,a=2<=arguments.length?arguments[1]:void 0,r=0;r<n;r++)if(r in t&&e.call(a,t[r],r,t))return!0;return!1}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var a=Object(this),r=a.length>>>0;if(0!=r){t=+t||0;if(!(r<=(t=Math.abs(t)===Infinity?0:t)))for(n=Math.max(0<=t?t:r-Math.abs(t),0);n<r;){if(n in a&&a[n]===e)return n;n++}}return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){"use strict";if(null==this)throw new TypeError;var t,n,a=Object(this),r=a.length>>>0;if(0!=r)for(t=r-1,1<arguments.length&&((t=Number(arguments[1]))!=t?t=0:0!=t&&t!=1/0&&t!=-1/0&&(t=(0<t||-1)*Math.floor(Math.abs(t)))),n=0<=t?Math.min(t,r-1):r-Math.abs(t);0<=n;n--)if(n in a&&a[n]===e)return n;return-1}),Array.prototype.find||(Array.prototype.find=function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),a=n.length>>>0,r=arguments[1],i=0;i<a;i++)if(t=n[i],e.call(r,t,i,n))return t;return undefined}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var a,r=[],i=2<=arguments.length?arguments[1]:void 0,o=0;o<n;o++)o in t&&(a=t[o],e.call(i,a,o,t)&&r.push(a));return r}),Array.prototype.reduce||(Array.prototype.reduce=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),a=n.length>>>0,r=0;if(2==arguments.length)t=arguments[1];else{for(;r<a&&!r in n;)r++;if(a<=r)throw new TypeError("Reduce of empty array with no initial value");t=n[r++]}for(;r<a;r++)r in n&&(t=e(t,n[r],r,n));return t}),"function"!=typeof Array.prototype.reduceRight&&(Array.prototype.reduceRight=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),a=(n.length>>>0)-1;if(2<=arguments.length)t=arguments[1];else{for(;0<=a&&!a in n;)a--;if(a<0)throw new TypeError("Reduce of empty array with no initial value");t=n[a--]}for(;0<=a;a--)a in n&&(t=e(t,n[a],a,n));return t}),$.fn.visible=function(){return this.css("display","block")},$.fn.invisible=function(){return this.css("display","none")},function(h){h.fn.stepper=function(c){var p={type:"float",floatPrecission:2,ui:!0,allowWheel:!0,allowArrows:!0,arrowStep:1,wheelStep:1,limit:[null,null],preventWheelAcceleration:!0,incrementButton:"",decrementButton:"",onStep:null,onWheel:null,onArrow:null,onButton:null,onKeyUp:null};return h(this).each(function(){var e,t,n,a=h(this).data(),r=(delete a.stepper,h.extend({},p,c,a)),i=h(this),a=h('<div class="stepper-wrap"/>');function o(e){e.preventDefault();var t,e=e.originalEvent;e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t&&(r.preventWheelAcceleration&&(t=t<0?-1:1),s("Wheel",[l(r.wheelStep*t),0<t]))}function l(e){i.val()||i.val(0);var t=u(("int"==r.type?parseInt:parseFloat)(i.val())+e);return i.val(t),s("Step",[t,0<e]),t}function s(e,t){e=r["on"+e];"function"==typeof e&&e.apply(i,t)}function u(e){var t=r.limit[0],n=r.limit[1];return null!==t&&e<t?e=t:null!==n&&n<e&&(e=n),d(e)}function d(e,t){void 0===t&&(t=r.floatPrecission);t=Math.pow(10,t);return e=Math.round(e*t)/t}i.data("stepper")||(a.insertAfter(i),i.appendTo(a),i.stepper={limit:u,decimalRound:d,onStep:function(e){r.onStep=e},onWheel:function(e){r.onWheel=e},onArrow:function(e){r.onArrow=e},onButton:function(e){r.onButton=e},onKeyUp:function(e){r.onKeyUp=e}},i.data("stepper",i.stepper),r.ui&&(e=h('<div class="stepper-btn-wrap"/>').appendTo(a),t=h('<a class="stepper-btn-up">'+r.incrementButton+"</a>").appendTo(e),n=h('<a class="stepper-btn-dwn">'+r.decrementButton+"</a>").appendTo(e),a.css({"margin-top":i.css("margin-top"),"margin-left":i.css("margin-left"),"margin-bottom":i.css("margin-bottom"),"margin-right":e.outerWidth()+parseInt(i.css("margin-right"))}),i.css("margin",0),t.mousedown(function(e){e.preventDefault(),s("Button",[l(r.arrowStep),!0])}),n.mousedown(function(e){e.preventDefault(),s("Button",[l(-r.arrowStep),!1])}),h(document).mouseup(function(){clearInterval(void 0)})),r.allowWheel&&(a.bind("DOMMouseScroll",o),a.bind("mousewheel",o)),a.keydown(function(e){var t=e.which,n=i.val();if(r.allowArrows)switch(t){case 38:s("Arrow",[n=l(r.arrowStep),!0]);break;case 40:s("Arrow",[n=l(-r.arrowStep),!1])}67!=t&&86!=t&&(t<37&&40<t||57<t&&t<91||105<t&&110!=t&&190!=t)&&e.preventDefault(),"float"==r.type&&-1!=h.inArray(t,[110,190])&&-1!=n.indexOf(".")&&e.preventDefault()}).keyup(function(e){""==i.val()?i.val(""):i.val().length<c.limit[0]?console.log("<"):i.val().length>c.limit[1]&&console.log(">"),s("KeyUp",[i.val()])}))})}}(jQuery),function(e){"use strict";function n(e,t){for(var n=0,a=e.length;n<a;n++)if(e[n]===t)return!0;return!1}e.Placeholders={Utils:{addEventListener:function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):void 0},inArray:n,moveCaret:function(e,t){var n;e.createTextRange?((n=e.createTextRange()).move("character",t),n.select()):e.selectionStart&&(e.focus(),e.setSelectionRange(t,t))},changeType:function(e,t){try{return e.type=t,!0}catch(n){return!1}}}}}(this),function(e){"use strict";function t(){}function l(){try{return document.activeElement}catch(e){}}function s(e,t){var t=!!t&&e.value!==t,n=e.value===e.getAttribute(A);return(t||n)&&"true"===e.getAttribute(x)&&(e.removeAttribute(x),e.value=e.value.replace(e.getAttribute(A),""),e.className=e.className.replace(C,""),t=e.getAttribute(D),0<=parseInt(t,10)&&(e.setAttribute("maxLength",t),e.removeAttribute(D)),(n=e.getAttribute(k))&&(e.type=n),!0)}function u(e){var t=e.getAttribute(A);return!(""!==e.value||!t)&&(e.setAttribute(x,"true"),e.value=t,e.className+=" "+w,e.getAttribute(D)||(e.setAttribute(D,e.maxLength),e.removeAttribute("maxLength")),e.getAttribute(k)?e.type="text":"password"===e.type&&M.changeType(e,"text")&&e.setAttribute(k,"password"),!0)}function n(e,t){var n,a,r,i,o;if(e&&e.getAttribute(A))t(e);else for(a=e?e.getElementsByTagName("input"):c,r=e?e.getElementsByTagName("textarea"):p,o=0,i=(n=a?a.length:0)+(r?r.length:0);o<i;o++)t(o<n?a[o]:r[o-n])}function d(e){n(e,s)}function a(e){var t,n,a,r,i,o;e.form&&!(v="string"==typeof(v=e.form)?document.getElementById(v):v).getAttribute(T)&&(M.addEventListener(v,"submit",(o=v,function(){d(o)})),v.setAttribute(T,"true")),M.addEventListener(e,"focus",(i=e,function(){h&&i.value===i.getAttribute(A)&&"true"===i.getAttribute(x)?M.moveCaret(i,0):s(i)})),M.addEventListener(e,"blur",(r=e,function(){u(r)})),h&&(M.addEventListener(e,"keydown",(a=e,function(e){return f=a.value,"true"===a.getAttribute(x)&&f===a.getAttribute(A)&&M.inArray($,e.keyCode)?(e.preventDefault&&e.preventDefault(),!1):void 0})),M.addEventListener(e,"keyup",(n=e,function(){s(n,f),""===n.value&&(n.blur(),M.moveCaret(n,0))})),M.addEventListener(e,"click",(t=e,function(){t===l()&&t.value===t.getAttribute(A)&&"true"===t.getAttribute(x)&&M.moveCaret(t,0)}))),e.setAttribute(F,"true"),e.setAttribute(A,m),!h&&e===l()||u(e)}var c,p,h,r,f,m,i,v,o,g,b,y=["text","search","url","tel","email","password","number","textarea"],$=[27,33,34,35,36,37,38,39,40,8,46],w="placeholdersjs",C=RegExp("(?:^|\\s)"+w+"(?!\\S)"),A="data-placeholder-value",x="data-placeholder-active",k="data-placeholder-type",T="data-placeholder-submit",F="data-placeholder-bound",D="data-placeholder-maxlength",E=document.createElement("input"),R=document.getElementsByTagName("head")[0],W=document.documentElement,J=e.Placeholders,M=J.Utils;if(J.nativeSupport=void 0!==E.placeholder,!J.nativeSupport){for(c=document.getElementsByTagName("input"),p=document.getElementsByTagName("textarea"),h="false"===W.getAttribute("data-placeholder-focus"),r="false"!==W.getAttribute("data-placeholder-live"),(E=document.createElement("style")).type="text/css",W=document.createTextNode("."+w+" { color:#ccc; }"),E.styleSheet?E.styleSheet.cssText=W.nodeValue:E.appendChild(W),R.insertBefore(E,R.firstChild),b=0,g=c.length+p.length;b<g;b++)o=c.length>b?c[b]:p[b-c.length],(m=o.attributes.placeholder)&&((m=m.nodeValue)&&M.inArray(y,o.type)&&a(o));i=setInterval(function(){for(b=0,g=c.length+p.length;b<g;b++)o=c.length>b?c[b]:p[b-c.length],(m=o.attributes.placeholder)?(m=m.nodeValue)&&M.inArray(y,o.type)&&(o.getAttribute(F)||a(o),m===o.getAttribute(A)&&("password"!==o.type||o.getAttribute(k))||("password"===o.type&&!o.getAttribute(k)&&M.changeType(o,"text")&&o.setAttribute(k,"password"),o.value===o.getAttribute(A)&&(o.value=m),o.setAttribute(A,m))):o.getAttribute(x)&&(s(o),o.removeAttribute(A));r||clearInterval(i)},100)}M.addEventListener(e,"beforeunload",function(){J.disable()}),J.disable=J.nativeSupport?t:d,J.enable=J.nativeSupport?t:function(e){n(e,u)}}(this);var DefaultField=function(n,e,t,a,r){this.buildHTML=function(){var e,t="number"===n;JFCustomWidget.getWidgetSettings();return e=t?(e={type:n,name:"input",step:"any"},isNaN(r.options[1])||(e.minlength=r.options[1]),isNaN(r.options[2])||(e.maxlength=r.options[2]),$("<input/>",e)):$("<input/>",{type:n,name:"input","class":"translatable form-textbox"}),void 0!==a&&e.val(a),"undefined"!=typeof r.hint&&e.attr("placeholder",r.hint),t&&(e.data("step",r.options[0]),e.data("min",r.options[1]),e.data("max",r.options[2]),e.addClass("form-number-input form-textbox stepper")),e},this.getValue=function(){return $("input",t).val()},this.getContainer=function(){return t},this.validate=function(){var e=$("input",t)[0];return e.validity?e.validity.valid:"function"!=typeof e.checkValidity||e.checkValidity()},this.clear=function(){$("input",t).val("")}},TextareaField=function(t,e,n,a){this.buildHTML=function(){var e=$('<textarea class="form-textarea translatable">',{name:"textarea"});return"undefined"!=typeof a.hint&&e.attr("placeholder",a.hint),e.mouseup(t.onCellResize),n&&e.val(n),e},this.getValue=function(){return $("textarea",e).val()},this.getContainer=function(){return e},this.clear=function(){$("textarea",e).val("")}},CheckboxRadioField=function(l,s,u,t,d,e){var n=e.options;this.buildHTML=function(){var i,o,e;return 0<n.length?(i=[],d&&(d=escapeEntities(d),i=0<d.search(/\r\n|\r|\n/g)?d.split(/\r\n|\r|\n/g):[d]),o=$('<div class="form-single-column"/>').addClass(l+"-container"),$.each(n,function(e,t){t=$.map(t.split(","),$.trim);$.each(t,function(e,t){var n,a=$("<div/>").addClass(l),e=l+"_input_"+e+"_row"+s,r=$("<label/>",{"for":e,"class":"translatable"});t=escapeEntities(t),"radio"===l&&(n=$("<input/>",{type:l,id:e,"class":"form-radio translatable"}).val(t)),"checkbox"===l&&(n=$("<input/>",{type:l,id:e,"class":"form-checkbox translatable"}).val(t)),"radio"===l&&n.attr("name",l+"_input_r_"+u.rowCount+"_row"+s),d&&0<i.length&&-1<i.indexOf(t)&&n.prop("checked",!0).attr("checked","checked"),r.append(t),a.append(n).appendTo(o),a.append(r).appendTo(o),n.on("change",function(){if("radio"===$(this).attr("type")){for(var e=$(this).closest("div.radio-container").find('input[type="radio"]'),t=0;t<e.length;t++)$(e[t]).closest("div").removeClass("selected");$(this).closest("div").addClass("selected")}else"checkbox"===$(this).attr("type")&&$(this).closest("div").toggleClass("selected")})})}),o):((e=$("<input/>",{type:l}).val(d)).click(function(){$(this).val($(this).is(":checked")?"1":"")}),1==d&&e.attr("checked","checked"),e)},this.getValue=function(){var e;return 0<n.length&&"checkbox"===l?(e=[],$("input[type="+l+"]:checked",t).each(function(){e.push($(this).val())}),0<e.length?e.join("\n"):""):void 0===(e=$("input[type="+l+"]:checked",t).val())?"":e},this.getContainer=function(){return t},this.clear=function(){$("input[type="+l+"]",t).prop("checked",!1).removeAttr("checked")}},DropdownField=function(e,t,i,o){this.buildHTML=function(){if(!(e=o.options).length)return"";var e=$.map(e[0].split(","),trim),t=$('<select class="form-dropdown"/>'),n=!1;"undefined"!=typeof o.hint&&(-1<e.indexOf(o.hint)?n="defaultvalue":(n=$("<option/>",{value:""}),(o.required?n.text(o.hint).attr("disabled","disabled").attr("selected","selected").css("display","none"):n.text(o.hint)).appendTo(t),n.addClass("translatable")));for(var a=0;a<e.length;a++){e[a]=escapeEntities(e[a]);var r=$("<option/>",{value:e[a]}).text(e[a]);r.addClass("translatable"),n&&"defaultvalue"===n&&e[a]===o.hint&&i!==e[a]&&r.attr("selected","selected"),i&&(i=escapeEntities(i))==e[a]&&(n&&"defaultvalue"!==n&&n.removeAttr("selected"),r.attr("selected","selected")),r.addClass("translatable"),t.append(r)}return t},this.getValue=function(){return $("select",t).val()},this.getContainer=function(){return t},this.clear=function(){setTimeout(function(){$("select",t).val(o.hint||"")},10)}},DateField=function(i,a,o,l,e){var s,r,u,d,c,p,h,f,m,v={},g=!1,t=e.options;this.buildHTML=function(){var n="",e=(n+='<span class="dateDropdowns">',y()),e=(!t[2]||"default"!==t[2]&&"today"!==t[2]||(g=!0),$.each(e,function(e,t){"year"==t?n+=g||l?buildRangeDropdown("y",f,m,s.year):buildRangeDropdown("y",f,m):n="month"==t?g||l?(n+="<div style = 'display:inline-block;' class = 'monthBox date-fields '>")+buildRangeDropdown("m",1,12,s.month,w())+"</div>":(n+="<div style = 'display:inline-block;' class = 'monthBox date-fields '>")+buildRangeDropdown("m",1,12,"",w())+"</div>":g||l?(n+="<div style = 'display:inline-block;' class = 'dayBox date-fields '>")+buildRangeDropdown("d",1,31,s.day)+"</div>":(n+="<div style = 'display:inline-block;' class = 'dayBox date-fields '>")+buildRangeDropdown("d",1,31)+"</div>"}),n=(n+="</span>")+'&nbsp;<img src="assets/calendar.png" alt="calendar" class="calendarIcon translatable" title="Show/hide calendar" />'+('<div class="calendarContainer" id="calendar'+i+'" style="display:none;"></div>'),$("<div>",{"class":"dateContainer",id:"dateContainer"+i}).html(n));$.datepicker.setDefaults($.datepicker.regional.en),$(".calendarContainer",e).datepicker({inline:!0,firstDay:1,dateFormat:"yy-mm-dd",onSelect:A}),$(e).on("change","select",x.bind(null,i)),$(e).on("click",".calendarIcon",C);return v["row_"+i]={year:"",month:""},e},this.getValue=function(){var e=$(".y",o).val(),t=$(".m",o).val(),n=$(".d",o).val();return!!(e&&t&&n)&&r.replace("y",e).replace("m",t).replace("d",n)},this.getContainer=function(){return o};b=!!$("th"+(".col"+i)+" span:first-child").hasClass("required"),this.validate=function(){var e=$(".y",o).val(),t=$(".m",o).val(),n=$(".dayBox",o),a=$(".d",o).val(),r=new Date(e,t,0).getDate();return 2!==u[0].search("/")&&(h=r),e===v["row_"+i].year&&t===v["row_"+i].month||(v["row_"+i].year=e,v["row_"+i].month=t,g||l?f==m&&d[0]==c[0]?n.html(buildRangeDropdown("d",p,h,s.day)):e==f&&t==parseInt(d[0])?n.html(buildRangeDropdown("d",p,r,s.day)):e==m&&t==parseInt(c[0])?n.html(buildRangeDropdown("d",1,h,s.day)):n.html(buildRangeDropdown("d",1,r,s.day)):f==m&&d[0]==c[0]?n.html(buildRangeDropdown("d",p,h)):e==f&&t==parseInt(d[0])?n.html(buildRangeDropdown("d",p,r)):e==m&&t==parseInt(c[0])?n.html(buildRangeDropdown("d",1,h)):n.html(buildRangeDropdown("d",1,r)),""!=a&&a<=r&&n.children().val(a)),!b||!(e<f||m<e)},this.clear=function(){$("select",o).each(function(e,t){$(t).val($("option:first",$(t)).val())})};var b,e=function(e){return 1==(e.match(/y/g)||[]).length&&(1==(e.match(/m/g)||[]).length&&(1==(e.match(/d/g)||[]).length&&!e.match(/[<>&0-9]+/)))},n=function(a){var r,e;return a?(r={},e=y(),$.each(e,function(e,t){var n="year"==t||"y"==t?/\d\d\d\d/:/\d\d/;r[t]=a.match(n)[0],a=a.replace(n,"")}),r):{year:(e=new Date).getFullYear(),month:e.getMonth()+1,day:e.getDate()}},y=function(){return $.map(r.match(/y|m|d/g),function(e){return e.replace("y","year").replace("m","month").replace("d","day")})},w=function(){return{"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"}},C=function(e){e=$(".calendarContainer",e.target.parentNode);"block"==e.css("display")?e.hide():e.show(),a.onCellResize()},A=function(e,t){var e=e.split("-"),n="#dateContainer"+t.id.replace("calendar","");$(n+" .y").val(e[0]),$(n+" .m").val(e[1]),$(n+" .d").val(e[2]),$("#"+t.id).hide(),a.onCellResize()},x=function(e){var t="",t=(t=(t+=$("#dateContainer"+e+" .y").val())+("-"+$("#dateContainer"+e+" .m").val()))+("-"+$("#dateContainer"+e+" .d").val());$("#calendar"+e).datepicker("setDate",t).hide()},k=function(e){return parseInt(e)==e};t[0].match(/y|m|d/)?(r=t[0],u=t[1]||""):(u=t[0]||"",r=t[1]||""),(r=r.toLowerCase())&&e(r)||(r="y-m-d"),s=n(l),u=u.split("-"),h=u[0].split("/").length-1==2?(d=u[0].split("/"),c=u[1].split("/"),f=d[2],m=c[2],p=(0==(p=d[1].split(""))[0]?p:d)[1],c[1]):(f=u&&k(u[0])?u[0]:s.year-10,m=u&&k(u[1])?u[1]:s.year+1,d=[1,1],c=[12,12],p=1,31)},TimeField=function(e,t,r,n){var n=n.options,i=12,o=[],l=!1;if(n&&-1<n[0].indexOf(",")){var a=n[0].split(","),s=$.trim(a[1].toLowerCase()),a=$.trim(a[0]),i="24"===a?Number(a):i;if("now"===s){a=new Date;o.push(a.getHours()),o.push(a.getMinutes()),l=!0}else if(-1<s.search(/\(([^)]+)\)/g)){a=s.replace(/\((.+?)\)/g,function(e,t,n){return decodeURIComponent(t)});if(-1<a.indexOf(":")){for(var u=a.split(":"),d=0;d<u.length;d++)o.push(parseInt(u[d]));l=!0}}}else i="24"===n[0]?Number(n[0]):i;this.buildHTML=function(){var e="",t=r?r.substring(0,2):null,n=r?r.substring(3,5):null,a=r?r.substring(6,8):null;return l&&(t=t||o[0],12===i?null==a&&(t=(t+11)%12+1):"PM"==a&&(t=12+parseInt(t)),n=n||o[1]),e+='<span class="timeContainer">',24==i&&(e+=buildRangeDropdown("h",0,i-1,t)+'<span class="colons">:</span>'+buildRangeDropdown("m",0,59,n)),12==i&&(e+=buildRangeDropdown("h",1,i,t)+'<span class="colons">:</span>'+buildRangeDropdown("m",0,59,n),a=r?r.substring(6,8):null,e=(e=(e+='&nbsp;<select class="ampm form-dropdown date-fields ">')+'<option value="" hidden></option><option value="AM"'+("AM"==(a=l?a||(12<=o[0]?"PM":"AM"):a)?' selected="selected"':"")+">AM</option>")+'<option value="PM"'+("PM"==a?' selected="selected"':"")+">PM</option></select>"),e+="</span>"},this.getValue=function(){var e=$(".h",t).val()&&$(".m",t).val()?$(".h",t).val()+":"+$(".m",t).val():"";return e&&12==i&&$(".ampm",t).val()?e+=" "+$(".ampm",t).val():12!=i||$(".ampm",t).val()||(e=""),e},this.getContainer=function(){return t},this.clear=function(){$("select",t).each(function(e,t){$(t).val($("option:first",$(t)).val())})}},StaticField=function(e,t,n,a){this.buildHTML=function(){var e=a.options;return'<span class="staticText translatable">'+(e.length?trim(e[0]):"")+"</span>"},this.getValue=function(){return $("span.staticText").html()},this.getContainer=function(){return t}},buildRangeDropdown=function(e,t,n,a,r){var i='<select class="form-dropdown date-fields '+e+'">';i+='<option value="" hidden></option>';for(var o=t;o<=n;o++)var l=10<=o?o:"0"+o,i=(i+='<option class="translatable" value="'+l+'"'+(l==a?' selected="selected"':"")+">")+(r&&r[l]?r[l]:l)+"</option>";return i+="</select>"},escapeEntities=function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")};$(function(){function n(t,s,a){var n=0,r=0,u=[],d=[],i=0,l={},c=parseInt(a.minRowsNumber)||0,p=parseInt(a.limit)||0,o=a.disableRequire||!1,h=!1,f=!1,m=[],e=!1;function v(){var n="";return n+='<table id="list" style="display:none;" cellpadding="4" class="'+(h?"vertical":"horizontal")+'">',h||(n+="<tr>",$.each(u,function(e,t){n=""==t.name?(t.hint==undefined?t.name="":t.name=t.hint,n+'<th class="col'+(e+1)+' translatable " ></th>'):(n+='<th class="col'+(e+1)+' translatable ">')+t.name+(t.required?" "+g():"")+"</th>"}),n=n+('<th class="col'+(u.length+1))+' buttonsColumn">&nbsp;</th></tr>'),n=(n=(n=(n+="</table>")+'<button aria-label="Add Row" class="add">'+'<span class="add-icon">')+(a.labelAdd&&"<empty>"!=a.labelAdd?a.labelAdd:"add")+"</span>")+'<span class="add-text">Add Row</span>'+"</button>"}function g(){return'<span class="required" title="required field">*</span>'}function b(){return'<button class="remove"><span class="remove-icon">'+(a.labelRemove&&"<empty>"!=a.labelRemove?a.labelRemove:"remove")+"</span></button>"}function y(e,i){var o,a;e&&e.preventDefault(),A()||(o=[],a=$("<tr>"),h?($td=$("<td/>"),$ul=$("<ul/>"),$.each(u,function(e,t){var n=null,a=(i&&(a=Object.keys(i)[e],n=i[a]),$("<li/>").addClass("rows row"+(e+1))),r=$("<div/>").addClass("names name-row"+(e+1)).html(t.name+(t.required?" "+g():"")),e=$("<div/>").addClass("fields field-row"+(e+1)),t=w(e,t,n);e.html(t.buildHTML()),a.append(r).append(e),$ul.append(a),o.push(t)}),$ul.append('<li class="col'+(u.length+1)+' buttonsColumn">'+b()+"</li>"),$ul.append('<li class="line-separator buttonsColumn"><div class="line"></div></li>'),$td.append($ul),a.append($td)):($.each(u,function(e,t){var n=null,e=(i&&(n=i[t.name]),$('<td class="col'+(e+1)+'">')),n=w(e,t,n),t=$('<span class="mobileColumnName translatable">'+t.name+"</span>");e.append(t),e.append(n.buildHTML()),a.append(e),o.push(n)}),a.append('<td class="col'+(u.length+1)+' buttonsColumn">'+b()+"</td>")),$("#list").append(a).show(),d.push(o),l.rowCount=d.length,h?$(".buttonsColumn").show():$(".buttonsColumn").visible(),A()&&$("button.add").hide(),f&&Placeholders.enable(),m.length&&$("input.stepper",a).each(function(e,t){var n;void 0===$(t).data("stepper-set")&&($(t).stepper({type:"float",wheelStep:$(t).data("step"),arrowStep:$(t).data("step"),limit:[$(t).data("min"),$(t).data("max")]}).data("stepper-set",!0),JFCustomWidgetUtils.getIE()<=9&&"undefined"!=typeof Placeholders&&(n=function(e){e=e.find("input");isNaN(e.val())&&e.hasClass("placeholdersjs")&&e.val(0).removeClass("placeholdersjs")},$(t).parents(".stepper-wrap").bind("DOMMouseScroll, mousewheel",function(){n($(this))}),$(t).siblings(".stepper-btn-wrap").find("a").click(function(){n($(this).parents(".stepper-wrap"))})))}),T())}function w(e,t,n){i+=1;var a={text:DefaultField.bind(null,"text"),textbox:DefaultField.bind(null,"text"),number:DefaultField.bind(null,"number"),textarea:TextareaField,radio:CheckboxRadioField.bind(null,"radio",i),checkbox:CheckboxRadioField.bind(null,"checkbox",i),dropdown:DropdownField,select:DropdownField,date:DateField.bind(null,i),time:TimeField,"static":StaticField};return new a[0<=Object.keys(a).indexOf(t.type)?t.type:"text"](l,e,n,t)}function C(i){var o={valid:!0,value:[]},l=!1,a=!1,r=[],n=($.each($(".stepper"),function(e,t){var n=!1;""!=$(t).attr("minlength")&&""!=$(t).val()&&(+$(t).val()<+$(t).attr("minlength")?($(t).addClass("error"),n=a=!0):$(t).removeClass("error")),n||""!=$(t).attr("maxlength")&&(+$(t).val()>+$(t).attr("maxlength")?($(t).addClass("error"),n=a=!0):$(t).removeClass("error")),n&&r.push([$(t).attr("minlength"),$(t).attr("maxlength")])}),"");return $.each(r,function(e,t){t[0]&&t[1]?n+=e+1+". Value should be between "+t[0]+" and "+t[1]+".\n":t[1]?n+=e+1+". Value should be less or equal "+t[1]+".\n":t[0]&&(n+=e+1+". Value should be greater or equal "+t[0]+".\n")}),a?(JFCustomWidget.showWidgetError(n),!1):(JFCustomWidget.hideWidgetError(),$.each(d,function(e,t){var n,r={};$.each(t,function(e,t){"function"!=typeof t.validate||t.validate()||(i&&t.getContainer().addClass("error"),o.valid=!1);var n=function(e,t){var n=1,a=e;for(;"undefined"!=typeof t[a];)a="unique:"+(n+=1)+"["+e+"]";return a}(u[e].name,r),a=t.getValue()?t.getValue():"";if("static"===u[e].type&&(a=u[e].options[0]),r[n]=a,u[e].required&&!a)return r[n]="",i&&t.getContainer().addClass("error"),!(l=!(o.valid=!1))}),0<Object.keys(r).length&&(n=!0,$.each(r,function(e,t){if(""!==t&&null!==t)return n=!1}),n)||o.value.push(r)}),(o.value.length<c||0<p&&o.value.length>p)&&(o.valid=!1),JFCustomWidget.isWidgetRequired()||0!==d.length||(o.valid=!0,JFCustomWidget.makeWidgetNotRequired()),o.value=0<o.value.length?JSON.stringify(o.value):"",(s.required||l)&&!1===o.valid?(o.value="",i&&JFCustomWidget.showWidgetError(JFCustomWidget.texts.required)):JFCustomWidget.hideWidgetError(),o)}function A(){return 0<p&&d.length>=p}function x(){if(!JFCustomWidget.isWidgetRequired()){for(cfg in u)if("required"in u[cfg]&&u[cfg].required){JFCustomWidget.makeWidgetRequired(),e=!0;break}0===d.length&&e&&(JFCustomWidget.makeWidgetNotRequired(),e=!1)}}function k(e){e=$(e.target);e.val()?e.parentsUntil("tr").removeClass("error"):e.hasClass("ui-state-default")&&$(".dateContainer").parentsUntil("tr").removeClass("error"),setTimeout(function(){JFCustomWidget.sendData(C())},10)}function T(){var e=$("#list").width(),t=$("body").height();if((!JFCustomWidget.isFromCardform()&&s.width+55<e||0===e)&&(0===e&&(t=s.height),e=s.width,$("#listContainer").css({"overflow-x":"auto"})),e==n&&t==r)return!1;JFCustomWidget.requestFrameResize({width:e,height:t+20}),n=e,r=t}this.init=function(){if(u=function(e){var n=[];return""!==e&&null!=e&&(e=e.split("\n"),$.each(e,function(e,t){t=function(e){if(""===(e=trim(e))||"*"==e)return!1;var t=!1;"*"==e.charAt(0)&&(t=!o,e=trim(e.substring(1)));if(!e.match(":"))return{name:e,type:"text",required:t};var n=$.map(e.split(":"),trim),a=n[0],n=n[1];"time"===n&&(e=e.replace(/\((.+?)\)/gi,function(e,t,n){return encodeURIComponent(e)}));e=$.map(e.split(":"),trim);var r=!1,i=[];switch(n){case"textarea":case"text":case"textbox":2<e.length&&(r=e[e.length-1]),i=e.slice(3);break;case"number":4===e.length?(i=$.map(e[e.length-1].split(","),function(e){return Number($.trim(e))}),r=e[2]):3===e.length&&(r=e[e.length-1]);break;case"dropdown":i=3<e.length?(r=e[e.length-1],[e[e.length-2]]):e.slice(2);break;default:i=e.slice(2)}a={name:a,type:n,options:i,required:t};r&&(a.hint=r,f=!0);"number"===a.type&&m.push(a);return a}(t);t&&n.push(t)})),n}(a.fields),$("#"+t).attr("data-widget","533946093c1ad0c45d000070").html(v),$("#list").on("click","button.remove",function(e){e&&e.preventDefault();var t=(e=$(e.target).parentsUntil("table, tbody").last()).prevAll().length-1;d.splice(t,1),e.remove(),d.length?d.length<=c&&(h?$(".buttonsColumn").hide():$(".buttonsColumn").invisible()):$("#list").hide(),l.rowCount=d.length,$("button.add").show(),T(),JFCustomWidget.sendData(C()),x()}),$("#list").on("change","input, select, textarea",k),$("#list").on("keyup","input, textarea",k),$("#list").on("click","input[type=checkbox], input[type=radio], a.stepper-btn-up, a.stepper-btn-dwn",k),$("#list").on("mouseup","a.ui-state-default",k),$("button.add").click(function(e){y(e),JFCustomWidget.sendData(C());JFWidgetTranslation.getDictionary();JFWidgetTranslation.translate(),x()}),0<c&&!s.value){for(var e=0;e<c;e++)y();h?$(".buttonsColumn").hide():$(".buttonsColumn").invisible(),T()}0<p&&(p=Math.max(c,p));A()&&($("button.add").hide(),T());(function(e){try{e=JSON.parse(e)}catch(t){return}e&&$.each(e,function(e,t){y(null,t)})})(s.value),s.value&&(function(){var e=$("input:checked");if(0<e.length)for(var t=0;t<e.length;t++)$(e[t]).closest("div").addClass("selected")}(),JFCustomWidget.sendData(C()));$(window).resize(T),T(),x()},this.getData=C,this.resetFields=function(){$.each(u,function(e,t){w($(".col"+(e+1)),t).clear()})},this.resizeIframe=T,l.rowCount=0,l.onCellResize=function(){T()},$("#listContainer").css("overflow-x","auto")}JFCustomWidget.subscribe("ready",function(e){var t=new n("listContainer",e,JFCustomWidget.getWidgetSettings());t.init(),JFCustomWidget.subscribe("submit",function(){Placeholders.disable(),JFCustomWidget.sendSubmit(t.getData(!0))}),JFCustomWidget.subscribe("customfont show clear",function(){t.resizeIframe()}),JFCustomWidget.subscribe("clear",function(){t.resetFields()})}),JFCustomWidget.subscribe("translatable",function(e){var t=JFWidgetTranslation.getTranslatables();JFCustomWidget.sendTranslatables(t)}),JFCustomWidget.subscribe("translate",function(e){var t=e.to;document.querySelectorAll(".dateContainer").forEach(function(e){"fr-FR"===t&&(t="fr"),$.datepicker.setDefaults($.datepicker.regional[t]),$(".calendarContainer").datepicker("refresh")}),JFWidgetTranslation.translate(e)})});
//# sourceMappingURL=scripts.min.js.map